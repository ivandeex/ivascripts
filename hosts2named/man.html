<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>DNStool 2.2 administration guide</title>
</head>
<body>
<!--
$Id: guide.html,v 1.6 1999/02/12 03:14:08 gordonr Exp $
--><a
 name="top"></a>
<p></p>
<hr><a name="Appendix A: h2n options files">
<h1>Appendix A: h2n options files</h1>
</a>Common features across domains are specified in a file called
<code>db/options.generic</code>. This file is in the format of
the parameters file for DNS configuration file builder, h2n. See <a
 href="#Appendix%20B:%20h2n%20manual%20page"><b>Appendix B: h2n manual
page</b></a> for a complete description of these options.
<p>It is also possible to create <code>options.${domain}</code> files
for extra options pertaining to a particular domain. These options
are currently <strong>appended</strong> to the options specified in
the
<code>options.generic</code> file.</p>
<p>This file enables features to be readily standardized across
domains,
such as the name servers, the time-to-live values of data, and contact
information. The more standard the domains, the simpler the task of
the DNStool (its sysadmin and programmer). At present the domains are
made to be as uniform as possible. They have a common set of name
servers, contact information, time-to-live data and default mx records.</p>
<p>Here is the current <i>options.generic</i> for the gormand.com.au
domain</p>
<p><code></code></p>
<pre>-h banana.gormand.com.au<br>-u hostmaster@gormand.com.au<br>-o 10800:3600:3600000:86400<br>-z 192.168.13.1<br>-s banana.gormand.com.au<br>-s bigted.gormand.com.au<br>-s hambyl.gormand.com.au<br>-m 10:mail.gormand.com.au<br></pre>
<p>In brief, there are three public name servers
<code>banana.gormand.com.au</code>, <code>bigted.gormand.com.au</code>
and <code>hambyl.gormand.com.au</code>. Refer to <a
 href="#Changing%0Anameservers"><b>Changing nameservers</b></a> for
more detail about
namserver types.
The Start of Authority record (the -u/o options to h2n) defines the
specified helpful person and authoritative host and time-to-live
periods. Secondary servers consult a certain host (specified by IP
address in the -z option) for data.</p>
<p>This file is used to generate an option file for each domain, which
is
given to h2n. The auto-configuration deduces additional options:</p>
<p></p>
<ul>
  <li> the domain name </li>
  <li> the network numbers in the domain </li>
  <li> whether the domain has a `hosts' file or a `resources' file to
be passed to h2n
  </li>
</ul>
Note that the network numbers are deduced from the host database
dynamically: the addition of a host on a new network in a domain will
be reflected automatically in the list of network numbers.
<p>The network numbers are assumed to be those of subnets of a Class B
network (in the form N.N.S), except for the internal root and top
level domains which have a constant value.</p>
<p>Note that options.generic does not include the serial number in the
SOA field. Instead, every time the DNStool is run, it generates a new
serial number for the generated files (from the system time) ensuring
that the information will propogate correctly.</p>
<p></p>
<hr><a name="Appendix B: h2n manual page">
<h1>Appendix B: h2n manual page</h1>
</a>NAME
<p> h2n - Translate host table to name server file format</p>
<p>SYNOPSIS</p>
<p> h2n -d DOMAIN -n NET [options]</p>
<p>DESCRIPTION</p>
<p>h2n translates /etc/hosts to DNS files and creates a BIND boot
file. This tool can be run once or many times. After converting your
host table to DNS format, you can manually maintain the DNS files, or
you can maintain the host table and run h2n each time you modify
/etc/hosts. h2n automatically increments the serial number in each DNS
file when it makes a new one.</p>
<p>h2n generates files starting with the prefix "db." These are
called "db files." The domain data is stored in a file
called db.DOMAIN, where DOMAIN is the first label in your domain name
(given with the -d option). The address-to-name data is stored in
files named db.NET, where NET is a network number (given with the -n
option).</p>
<p>Each time h2n is run, it generates the DNS files from scratch. Any
changes you manually made to the DNS files are lost. If you'd like to
add resource records to a db file generated by h2n, put your RRs in a
file prefixed with "spcl" instead of "db". h2n
will include this file's data by adding a $INCLUDE directive to the
end of the db file.</p>
<p>By default, h2n will generate an MX record with a weight of 10 that
points to the host itself as the mail exchanger. MX records can be
suppressed with -M. Additional MX records can be added with -m. To
suppress generating the default MX record for a host, include
"[no smtp]" in that host's host table comment. By default,
h2n will create a boot file, ./boot.cacheonly, for a caching only name
server. If either of the -z or -Z options are used, h2n creates a boot
file, named ./boot.sec.save or ./boot.sec respectively, for a
secondary name server.</p>
<p>Options are:
</p>
<ul>
  <li>-b BOOTFILE Use BOOTFILE instead of the default: ./named.boot
    <p> </p>
  </li>
  <li>-c DOMAIN Create CNAME records in the default domain for all the
hosts in DOMAIN. Including more than one -c option is allowed
    <p> </p>
  </li>
  <li>-d DOMAIN Your domain name is DOMAIN
    <p> </p>
  </li>
  <li>-e DOMAIN Eliminate all lines from the host table with names in
DOMAIN. Including more than one -e option is allowed
    <p> </p>
  </li>
  <li> -f FILE Command line options are in a file called FILE. This
option cannot be used within FILE
    <p> </p>
  </li>
  <li> -h HOST Use HOST in the fields of the SOA record that require a
hostname. The default is the host on which you run h2n
    <p> </p>
  </li>
  <li> -m WEIGHT:MX-HOST Include an MX record for each host in your
domain pointing to MX-HOST at WEIGHT. Including more than one -m option
is allowed. Example: <code>-m 10:terminator.movie.edu -m20:wormhole</code>
    <p> </p>
  </li>
  <li> -n NET[:SUBNETMASK] NET is your network number without the
trailing zeros. Including more than one -n option is allowed. If
SUBNETMASK is provided, create data for each subnet of NET
    <p> Example: -n 192.249.249 -n 15.15.16:255.255.248.0</p>
    <p> </p>
  </li>
  <li> -o REFRESH:RETRY:EXPIRE:MINIMUM Change the default SOA values
(10800:3600:604800:86400) to the values provided
    <p> </p>
  </li>
  <li> -s SERVER List SERVER in each domain's NS records. Including
more than one -s option is allowed
    <p> </p>
  </li>
  <li> -t Generate TXT records from the host table comments. If <b>[no
smtp]</b> appears in a comment, it is ignored
    <p> </p>
  </li>
  <li> -u USER Use USER in the SOA mail address instead of root. USER
can be a complete mail address as in: me@a.b.c.
    <p> </p>
  </li>
  <li> -w Generate WKS records that list the SMTP service over the TCP
protocol if an MX record is also created
    <p> </p>
  </li>
  <li> -z ADDRESS Create a boot file, ./boot.sec.save, for a secondary
name server that lists ADDRESS as the master to load from. Save a copy
of the domain data in a backup file. (This option is similar to the -Z
option.)
    <p> </p>
  </li>
  <li> -C COMMENT-FILE Create resource records by using keys in the
host table comment field as indices into COMMENT-FILE. COMMENT-FILE
contains "key:resource record" pairs like: "720:IN HINFO hp9000s720
hp-ux". When h2n encounters "720" in the comment section of the host
table, it creates a resource record by replacing the "720:" with the
host's canonicalname.
    <p> </p>
  </li>
  <li> -H HOSTFILE Use HOSTFILE instead of /etc/hosts
    <p> </p>
  </li>
  <li>-M Don't generate MX records
    <p> </p>
  </li>
  <li> -N SUBNETMASK Apply SUBNETMASK to all network numbers instead of
listing each subnet with -n. Specifying a subnet mask with -n overrides
the -N subnet mask for that network only.
    <p> </p>
  </li>
  <li> -Z ADDRESS Create a boot file, ./boot.sec, for a secondary name
server that lists ADDRESS as the master to load from. Do not save a
copy of the data in a backup file. (This option is similar to the -z
option.)
    <p></p>
  </li>
</ul>
EXAMPLES
<p></p>
<ul>
  <li>Create name server data for networks 192.249.249 and 192.253.253
in movie.edu.
    <p> <code> h2n -d movie.edu -n 192.249.249 -n 192.253.253</code></p>
    <p> </p>
  </li>
  <li> Create name server data for networks 192.249.249 and 192.253.253
in movie.edu. Eliminate lines in the host table that contain
fx.movie.edu and include MX records for all hosts pointing to the mail
hub, postmanrings2x.movie.edu. Include all of the options in a file.
    <p> <code>h2n -f option_file</code></p>
    <p> where option_file contains the following lines:</p>
    <p> <code></code></p>
    <pre>       -d movie.edu<br>       -n 192.249.249<br>       -n 192.253.253<br>       -e fx.movie.edu<br>       -m 50:postmanrings2x.movie.edu<br>       </pre>
  </li>
</ul>
<hr>
<a name="Appendix C: Host database grammar"></a>
</body>
</html>
